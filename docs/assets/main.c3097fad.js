var H=Object.defineProperty,z=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var B=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,y=(t,e)=>{for(var s in e||(e={}))q.call(e,s)&&B(t,s,e[s]);if(I)for(var s of I(e))G.call(e,s)&&B(t,s,e[s]);return t},k=(t,e)=>z(t,K(e));import{_,m as F,n as x,E as J,p as Q,l as O,s as C,g as X,a as Y,d as Z,b as ee}from"./Errors.0eff594f.js";import{c,o as a,m as v,w,v as P,a as i,t as f,F as h,r as R,b as d,d as b,e as te,f as m,g as $,h as M,i as se,j as N,n as W,k as A,l as S,p as j,q as ne,u as le,s as oe,x as re}from"./vendor.e07bfb2c.js";const ie={name:"ToggleButton",props:{values:Object,modelValue:String},computed:{UIValue(){return this.values[this.modelValue]}},methods:{nextValue(){const t=Object.keys(this.values),e=t[(t.indexOf(this.modelValue)+1)%t.length];this.$emit("update:modelValue",e)}}},ae=["value"];function ue(t,e,s,l,r,n){return a(),c("input",{type:"button",value:n.UIValue,onClick:e[0]||(e[0]=(...o)=>n.nextValue&&n.nextValue(...o))},null,8,ae)}var ce=_(ie,[["render",ue]]);const de={name:"Optional",props:{assignment:Object},computed:k(y({},v(["isOptional"])),{optional:{get(){return this.$store.getters.isOptional(this.assignment)},set(t){this.$store.commit("setOptional",{assignment:this.assignment,turnedOn:t})}}})},_e=["id"],me=["for"],ge=i("br",null,null,-1);function pe(t,e,s,l,r,n){return a(),c(h,null,[w(i("input",{type:"checkbox",id:s.assignment.id,"onUpdate:modelValue":e[0]||(e[0]=o=>n.optional=o)},null,8,_e),[[P,n.optional]]),i("label",{for:s.assignment.id},f(s.assignment.shortname),9,me),ge],64)}var he=_(de,[["render",pe]]);const fe={name:"Optionalas",components:{Optional:he},computed:{optionals(){return this.$store.getters.allOptional}}};function ve(t,e,s,l,r,n){const o=d("Optional");return a(!0),c(h,null,R(n.optionals,u=>(a(),b(o,{key:u.id,assignment:u},null,8,["assignment"]))),128)}var $e=_(fe,[["render",ve]]);const be={name:"Replacing",props:{replaces:Object,replacing:Object},computed:k(y({},v(["isReplacing"])),{replacer:{get(){return this.$store.getters.isReplacing(this.replacing,this.replaces)},set(t){this.$store.commit("setReplacer",{replaces:this.replaces,replacing:this.replacing,turnedOn:t})}}})},ye=["id"],ke=["for"],we=i("br",null,null,-1);function Re(t,e,s,l,r,n){return a(),c(h,null,[w(i("input",{type:"checkbox",id:s.replaces.id+"-"+s.replacing.id,"onUpdate:modelValue":e[0]||(e[0]=o=>n.replacer=o)},null,8,ye),[[P,n.replacer]]),i("label",{for:s.replaces.id+"-"+s.replacing.id},f(s.replacing.shortname),9,ke),we],64)}var je=_(be,[["render",Re]]);const Oe={name:"Replacings",components:{Replacing:je},computed:{replacers(){return this.$store.getters.allReplacing}}};function Ae(t,e,s,l,r,n){const o=d("Replacing");return a(!0),c(h,null,R(n.replacers,u=>(a(),b(o,{key:u.replaces.id+"-"+u.replacing.id,replaces:u.replaces,replacing:u.replacing},null,8,["replaces","replacing"]))),128)}var Se=_(Oe,[["render",Ae]]);const xe={name:"Settings",components:{ToggleButton:ce,Optionals:$e,Replacings:Se},computed:k(y({},v(["showResults"])),{mode:{get(){return this.$store.state.mode},set(t){this.$store.commit("setMode",t)}},scale:{get(){return this.$store.state.settings.scale},set(t){this.$store.commit("setScale",Number(t))}},round:{get(){return this.$store.state.settings.round},set(t){this.$store.commit("setRound",t)}}}),methods:k(y({},te(["setRound"])),{clearAll(){confirm("Weet je zeker dat je alle resultaten wilt wissen?")&&this.$store.commit("clearAll")}}),created(){this.modi=F}},Pe={class:"settings"},Ve=i("hr",null,null,-1),Ie=i("hr",null,null,-1),Be=i("hr",{class:"left"},null,-1),Ce=i("input",{placeholder:"Importeer resultaten",title:"Plak hier je magister resultaten"},null,-1),Ee=i("a",{class:"import-btn",href:"import.html",title:"Voor als je een beetje hulp nodig hebt bij het importeren van je magister cijfers"}," help me ",-1),Te=i("hr",null,null,-1),Le=["min","max","step"],Me=i("datalist",{id:"tickmarks"},[i("option",{value:"1.0"})],-1);function Ne(t,e,s,l,r,n){const o=d("ToggleButton"),u=d("Optionals"),p=d("Replacings");return a(),c("div",Pe,[m(o,{values:t.modi,modelValue:n.mode,"onUpdate:modelValue":e[0]||(e[0]=g=>n.mode=g),style:{"font-weight":"700"}},null,8,["values","modelValue"]),t.showResults?(a(),c("input",{key:0,type:"button",value:"ALLE RESULTATEN WISSEN",onClick:e[1]||(e[1]=(...g)=>n.clearAll&&n.clearAll(...g))})):$("",!0),Ve,m(u),Ie,m(p),Be,Ce,Ee,Te,w(i("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=g=>n.scale=g),min:.7,max:1.3,step:.05,list:"tickmarks",title:"Stel de grootte van de tabel in"},null,8,Le),[[M,n.scale]]),Me,w(i("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=g=>n.round=g),title:"Schakel tussen ronde en rechthoekige opdrachten"},null,512),[[P,n.round]])])}var We=_(xe,[["render",Ne]]);const Ue={name:"Header",props:{showResults:Boolean}},De=i("th",{class:"small-row"},"VAK",-1),He=i("th",null,"OPDRACHTEN",-1),ze={key:0,class:"small-row"};function Ke(t,e,s,l,r,n){return a(),c(h,null,[De,He,s.showResults?(a(),c("th",ze,"GEM.")):$("",!0)],64)}var qe=_(Ue,[["render",Ke]]);const Ge="modulepreload",E={},Fe="/",Je=function(e,s){return!s||s.length===0?e():Promise.all(s.map(l=>{if(l=`${Fe}${l}`,l in E)return;E[l]=!0;const r=l.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${n}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Ge,r||(o.as="script",o.crossOrigin=""),o.href=l,document.head.appendChild(o),r)return new Promise((u,p)=>{o.addEventListener("load",u),o.addEventListener("error",p)})})).then(()=>e())},Qe={name:"AssignmentBlock",props:{assignment:Object,widthPercentage:Number,hoveredId:String,clickedId:String},components:{AssignmentBlocks:se(()=>Je(()=>Promise.resolve().then(function(){return st}),void 0))},computed:k(y({},N(["hovered","clicked"])),{background(){const t=this.$store.getters.result(this.assignment),e=this.assignment.type;if(t===void 0||!this.$store.getters.showResults||this.assignment.assignments)return`var(--${e}-color)`;{const s=(this.$store.getters.result(this.assignment)-1)/9*100;return`border-box linear-gradient(0deg,                         var(--${e}-color-dark) 0%,                         var(--${e}-color-dark) ${s}%,                         var(--${e}-color) ${s}%,                         var(--${e}-color) 100%)`}}}),methods:{onOver(){this.$store.commit("hover",this.assignment)},onLeave(){this.$store.commit("hover",null)},onClick(){this.$store.commit("click",this.assignment)}}};function Xe(t,e,s,l,r,n){const o=d("AssignmentBlocks");return a(),c("div",{class:W(["assignment-block",t.hovered&&t.hovered.id===s.assignment.id?"hovered-block":null,t.clicked&&t.clicked.id===s.assignment.id?"selected-block":null]),style:A({width:s.widthPercentage+"%",background:n.background}),onMouseover:e[0]||(e[0]=S(u=>n.onOver(),["stop"])),onMouseout:e[1]||(e[1]=S(u=>n.onLeave(),["stop"])),onClick:e[2]||(e[2]=S(u=>n.onClick(),["stop"]))},[s.assignment.assignments?(a(),b(o,{key:0,assignments:s.assignment.assignments},null,8,["assignments"])):$("",!0)],38)}var Ye=_(Qe,[["render",Xe]]);const Ze={name:"AssignmentBlocks",props:{assignments:Array},components:{AssignmentBlock:Ye},data(){return{totalSubweight:0}},created(){this.totalSubweight=0;for(const t of this.assignments)this.totalSubweight+=t.weight}},et={class:"assignment-block group-block"};function tt(t,e,s,l,r,n){const o=d("AssignmentBlock");return a(),c("div",et,[(a(!0),c(h,null,R(s.assignments,u=>(a(),b(o,{key:u.id,assignment:u,widthPercentage:u.weight/r.totalSubweight*100},null,8,["assignment","widthPercentage"]))),128))])}var U=_(Ze,[["render",tt]]),st=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});const nt={name:"Row",props:{assignment:Object,showResults:Boolean},components:{AssignmentBlocks:U},computed:v(["result"]),methods:{nl_num:x}},lt={class:"blocks-column"},ot=["title"];function rt(t,e,s,l,r,n){const o=d("AssignmentBlocks");return a(),c("tr",null,[i("td",null,f(s.assignment.shortname),1),i("td",lt,[m(o,{assignments:s.assignment.assignments},null,8,["assignments"])]),s.showResults?(a(),c("td",{key:0,title:n.nl_num(t.result(s.assignment))},f(n.nl_num(t.result(s.assignment,!0),1)),9,ot)):$("",!0)])}var it=_(nt,[["render",rt]]);const at={name:"TotalRow",computed:v(["min","max","median","avg"]),methods:{nl_num:x}},ut={colspan:"2"},ct=i("hr",{class:"tot-sep"},null,-1),dt={style:{display:"flex"}},_t=i("div",null,"Totaal:",-1),mt={class:"stats"},gt=["title"],pt=i("strong",null,"min:",-1),ht=["title"],ft=i("strong",null,"max:",-1),vt=["title"],$t=i("strong",null,"mediaan:",-1),bt={style:{display:"block"}},yt=i("hr",{class:"tot-sep"},null,-1),kt=["title"];function wt(t,e,s,l,r,n){return a(),c("tr",null,[i("td",ut,[ct,i("div",dt,[_t,i("div",mt,[i("div",{title:n.nl_num(t.min(),1)},[pt,j(" "+f(n.nl_num(t.min(!0),1)),1)],8,gt),i("div",{title:n.nl_num(t.max(),1)},[ft,j(" "+f(n.nl_num(t.max(!0),1)),1)],8,ht),i("div",{title:n.nl_num(t.median(),1)},[$t,j(" "+f(n.nl_num(t.median(!0),1)),1)],8,vt)])])]),i("td",bt,[yt,i("div",{title:n.nl_num(t.avg(),1)},f(n.nl_num(t.avg(!0),1)),9,kt)])])}var Rt=_(at,[["render",wt]]);const jt={name:"Overview",components:{Header:qe,Row:it,TotalRow:Rt},computed:v(["subjects","showResults"])},Ot={class:"overview"};function At(t,e,s,l,r,n){const o=d("Header"),u=d("Row"),p=d("TotalRow");return a(),c("table",Ot,[m(o,{showResults:t.showResults},null,8,["showResults"]),(a(!0),c(h,null,R(t.subjects,g=>(a(),b(u,{key:g.id,assignment:g,showResults:t.showResults},null,8,["assignment","showResults"]))),128)),t.showResults?(a(),b(p,{key:0})):$("",!0)])}var St=_(jt,[["render",At]]);const xt={props:{},computed:v(["types"])},Pt=i("div",{class:"heading"},"LEGENDA",-1);function Vt(t,e,s,l,r,n){return a(),c(h,null,[Pt,(a(!0),c(h,null,R(t.types,o=>(a(),c("div",{key:o,class:"legend-item",style:A({background:`var(--${o}-color)`})},f(o),5))),128))],64)}var It=_(xt,[["render",Vt]]);const Bt={name:"AssignmentProp",props:{key_:String,value:null,style:Object},methods:{toString}},Ct={class:"info-key"},Et=i("br",null,null,-1);function Tt(t,e,s,l,r,n){return a(),c(h,null,[i("span",Ct,f(s.key_)+": ",1),i("span",{class:"info-value",style:A(s.style)},f(s.value.toString()),5),Et],64)}var Lt=_(Bt,[["render",Tt]]);const Mt={props:{assignment:Object},computed:v(["subjectWeight","totalWeight"]),methods:{nl_num:x},components:{AssignmentProp:Lt}},Nt={key:1};function Wt(t,e,s,l,r,n){const o=d("AssignmentProp");return a(),c(h,null,[m(o,{key_:"soort",value:s.assignment.type,style:A({background:`var(--${s.assignment.type}-color)`,padding:"0 .25em"})},null,8,["value","style"]),["VAK","COMB"].includes(s.assignment.type)?(a(),b(o,{key:0,key_:"naam",value:s.assignment.fullname},null,8,["value"])):$("",!0),m(o,{key_:"weging per cijfer",value:n.nl_num(t.subjectWeight(s.assignment)*100,void 0,4)+"%"},null,8,["value"]),m(o,{key_:"weging diplomacijfer",value:n.nl_num(t.totalWeight(s.assignment)*100,void 0,4)+"%"},null,8,["value"]),["PO","MET","SET"].includes(s.assignment.type)?(a(),c("div",Nt,[m(o,{key_:"leerjaar",value:s.assignment.year},null,8,["value"]),m(o,{key_:"periode",value:s.assignment.period},null,8,["value"]),"domains"in s.assignment?(a(),b(o,{key:0,key_:"domeinen",value:s.assignment.domains.join(", ")},null,8,["value"])):$("",!0),m(o,{key_:"beschrijving",value:s.assignment.description,style:{whiteSpace:"pre-wrap"}},null,8,["value"])])):$("",!0)],64)}var Ut=_(Mt,[["render",Wt]]);const Dt={name:"ResultInput",props:{assignment:Object},data(){return{result:void 0}},computed:{assignmentResult(){return this.$store.getters.result(this.assignment)},canInput(){return["SET","MET","PO"].includes(this.assignment.type)}},methods:{clearResult(){this.$store.commit("setResult",{assignment:this.assignment})},submitResult(){this.$store.commit("setResult",{assignment:this.assignment,result:this.result})},updateResult(){this.result=this.$store.getters.result(this.assignment,!0)}},watch:{assignmentResult(){this.updateResult()}},created(){this.updateResult()}},Ht=j(" Resultaat: "),zt=i("br",null,null,-1),Kt=["disabled"],qt=["disabled"],Gt=["disabled"];function Ft(t,e,s,l,r,n){return a(),c("label",null,[Ht,zt,w(i("input",{type:"number",min:"1",step:"0.1","onUpdate:modelValue":e[0]||(e[0]=o=>r.result=o),onKeyup:e[1]||(e[1]=ne((...o)=>n.submitResult&&n.submitResult(...o),["enter"])),disabled:!n.canInput,required:""},null,40,Kt),[[M,r.result]]),i("input",{type:"button",value:"invullen",disabled:!n.canInput,onClick:e[2]||(e[2]=(...o)=>n.submitResult&&n.submitResult(...o))},null,8,qt),i("input",{type:"button",value:"wissen",disabled:!n.canInput,onClick:e[3]||(e[3]=(...o)=>n.clearResult&&n.clearResult(...o))},null,8,Gt)])}var Jt=_(Dt,[["render",Ft]]);const Qt={name:"Info",props:{assignment:Object},components:{Legend:It,AssignmentProps:Ut,ResultInput:Jt},computed:v(["showResults"])},Xt={key:1},Yt={key:0,class:"result-input"},Zt=i("br",null,null,-1);function es(t,e,s,l,r,n){const o=d("Legend"),u=d("AssignmentProps"),p=d("ResultInput");return a(),c("div",{class:W(["info",s.assignment?"info-props":"info-legend"])},[s.assignment?(a(),c("div",Xt,[m(u,{assignment:s.assignment},null,8,["assignment"]),t.showResults?(a(),c("div",Yt,[Zt,m(p,{assignment:s.assignment},null,8,["assignment"])])):$("",!0)])):(a(),b(o,{key:0}))],2)}var ts=_(Qt,[["render",es]]);const ss={name:"Content",components:{Overview:St,Info:ts},computed:v(["focussed"])},ns={class:"content"};function ls(t,e,s,l,r,n){const o=d("Overview"),u=d("Info");return a(),c("div",ns,[m(o),m(u,{assignment:t.focussed},null,8,["assignment"])])}var os=_(ss,[["render",ls]]);const V={name:"App",components:{Settings:We,Content:os,Errors:J},computed:k(y({},N(["settings"])),{roundness(){return this.$store.state.settings.round?"2em":"0"}}),data(){return{errors:[]}},methods:{onPaste(t){console.log("onPaste",t),t.preventDefault();try{let e=Q(t.clipboardData.getData("text/html"),l=>{this.errors.push(l)}),s=y({},O("results",{}));for(const l of e)s[l.assignment.id]=l.score;this.$store.state.results=O("results",s)}catch(e){console.error(e),this.errors.push(e);return}}},watch:{settings:{handler(){C("settings",this.$store.state.settings)},deep:!0},results:{handler(){C("results",this.$store.state.results)},deep:!0}},created(){console.log(this.$store.state),window.gen_id=X},errorCaptured(t,e,s){this.errors.push(t)}},T=()=>{le(t=>({e82a3886:t.settings.scale,e52bb3b2:t.roundness}))},L=V.setup;V.setup=L?(t,e)=>(T(),L(t,e)):T;const rs=V;function is(t,e,s,l,r,n){const o=d("Errors"),u=d("Settings"),p=d("Content");return a(),c(h,null,[m(o,{errors:r.errors},null,8,["errors"]),m(u,{onPaste:n.onPaste},null,8,["onPaste"]),m(p)],64)}var as=_(rs,[["render",is]]);const us=oe({state:{grade:Y(Z),mode:"results",hovered:null,clicked:null,settings:O("settings",{extra:[],replacing:[],round:!1,scale:1}),results:O("results",{})},getters:{subjects(t){let e=[];for(const s of t.grade.assignments)s.optional&&!t.settings.extra.includes(s.id)||t.settings.replacing.some(l=>l.startsWith(s.id))||s.replaces&&!t.settings.replacing.some(l=>l.endsWith(s.id))||e.push(s);return e},showResults(t){return t.mode==="results"},focussed(t){return t.clicked!==null?t.clicked:t.hovered},types(t,e){const s={};function l(r){if(r.type in s||(s[r.type]=0),s[r.type]++,r.assignments)for(const n of r.assignments)l(n)}for(const r of e.subjects)for(const n of r.assignments)l(n);return new Map([...Object.entries(s)].sort((r,n)=>n[1]-r[1])).keys()},allOptional(t){let e=[];function s(l){if(l.optional&&e.push(l),l.assignments)for(const r of l.assignments)s(r)}return s(t.grade),e},allReplacing(t){let e=[];function s(l){if(l.replaces&&e.push({replaces:ee(l.replaces),replacing:l}),l.assignments)for(const r of l.assignments)s(r)}return s(t.grade),e},isOptional:t=>e=>t.settings.extra.includes(e.id),isReplacing:t=>(e,s)=>t.settings.replacing.includes(s.id+"-"+e.id),result:(t,e)=>(s,l=!1)=>{let r;if(s.id in t.results)r=t.results[s.id];else if(s.assignments){let n=0,o=0;for(const u of s.assignments){const p=e.result(u,l);if(p===void 0)continue;const g=u.weight/u.parent.total_subweight;n+=p*g,o+=g}o>0&&(r=n/o)}return l&&r!==void 0&&(r=Math.round((r+Number.EPSILON)*10)/10),r},avg:(t,e)=>(s=!1)=>{let l=0,r=0;for(const n of e.subjects){const o=e.result(n,s);o&&(l+=o,r++)}if(r){const n=l/r;return s?Math.round((n+Number.EPSILON)*10)/10:n}},min:(t,e)=>(s=!1)=>{let l=1/0;for(const r of e.subjects){const n=e.result(r,s);n<l&&(l=n)}if(l<1/0)return l},max:(t,e)=>(s=!1)=>{let l=-1/0;for(const r of e.subjects){const n=e.result(r,s);n>l&&(l=n)}if(l>-1/0)return l},median:(t,e)=>(s=!1)=>{let l=[];for(const n of e.subjects){const o=e.result(n,s);o&&l.push(o)}if(l.length===0)return;l.sort((n,o)=>n-o);let r=Math.floor(l.length/2);return l.length%2?l[r]:(l[r]+l[r+1])/2},subjectWeight:t=>e=>{if(!e.parent)return;let s=e.weight;do e=e.parent,s/=e.total_subweight;while(e.parent.parent);return s},totalWeight:(t,e)=>s=>e.subjectWeight(s)/e.subjects.length},mutations:{setRound(t,e){console.log("round",e),t.settings.round=e},setScale(t,e){console.log("scale",e),t.settings.scale=e},setMode(t,e){console.log("mode",e),t.mode=e},hover(t,e){t.hovered=e},click(t,e){t.clicked=t.clicked===e?null:e},setOptional(t,{assignment:e,turnedOn:s}){s&&!t.settings.extra.includes(e.id)&&t.settings.extra.push(e.id),s||(t.settings.extra=t.settings.extra.filter(l=>l!==e.id))},setReplacer(t,{replaces:e,replacing:s,turnedOn:l}){let r=e.id+"-"+s.id;l&&!t.settings.replacing.includes(r)&&t.settings.replacing.push(r),l||(t.settings.replacing=t.settings.replacing.filter(n=>n!==r))},setResult(t,{assignment:e,result:s}){t.results[e.id]=s},clearAll(t){t.results={}}}}),D=re(as);D.use(us);D.mount("#app");
